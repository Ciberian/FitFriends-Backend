# Приложение FitFriends (fullstack)
«FitFriends» — это онлайн площадка для поиска тренировок и их заведения. Веб-приложение (сайт) функционирует как смесь соцсети и биржи объявлений.
Тренеры создают тренировки, а пользователи могут покупать их и заниматься, а в личном кабинете отслеживать свой прогресс. 

Приложение состоит из 4-х микросервисов:
- **trainings** - сервис предоставляющий api для выполнения CRUD-операций с тренировками;
- **gyms** - cервис предоставляющий api для взаимодействия с БД в которой храняться спортивные залы;
- **users** - сервис предоставляющий api для выполнения CRUD-операций с пользователями;
- **notify** - сервис рассылки почтовых уведомлений пользователям.

## Работа с Докером

Для хранения данных микросервисы используют БД - MongoDB и PostgreSQL.
Базы данных создаём в контейнерах Докера на основе готовых образов.
Вся необходимая для этого конфигурация, описана в файлах docker-compose.yml.

1) Перед работой с Докером, предварительно переходим в директорию с файлом docker-compose.yml:
`cd fit-friends/apps/<директория с микросервисом>`

2) Для создания контейнеров с БД, согласно конфигурации описанной в docker-compose.yml выполняем следующую команду:
`docker-compose up -d`

3) Для удаления докер-контейнеров с БД выпоняем следующую команду:
`docker-compose down`

## Выполнение команд

1) В корневой папке каждого микросервиса есть файл `project.json`, в котором описан ряд стандартных команд:
- *build* - создать билд проекта, скомпиллировать ts в js;
- *serve* - запустить созданный билд; 
- *lint* - запустить проверку линтером (для указанного микросервиса), для всех файлов с расширением ts;
- *test* - запустить тесты (jest) для указанного микросервиса.

Перед вызовом команд, не забываем перейти в директорию fit-friends:
`cd fit-friends`

Сам вызов команд осуществляется следующим образом **nx run <имя_микросервиса>:<команда>**
Пример:
`nx run users:serve`

2) В для микросервисов trainings и gyms также доступны дополнительные команды используемые на этапе разработки, для выпонения операций с БД:
- *db-validate* - проверка схемы;
- *db-migrate* - запуск миграции;
- *db-reset* - удаление и очистка БД;
- *db-generate* - генерация Prisma Client;
- *db-fill* - заполнение БД данными.

Пример:
`nx run trainings:db-reset`

Спецификация OpenAPI для сервиса users - http://localhost:3330/spec
Спецификация OpenAPI для сервиса training - http://localhost:3331/spec
